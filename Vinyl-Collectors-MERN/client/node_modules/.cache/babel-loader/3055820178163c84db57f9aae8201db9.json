{"ast":null,"code":"import _regeneratorRuntime from\"D:/GitHub Repositories/Vinyl-Collectors-MERN/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/GitHub Repositories/Vinyl-Collectors-MERN/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/GitHub Repositories/Vinyl-Collectors-MERN/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useMutation}from'@apollo/client';import{ADD_REACTION}from'../../utils/mutations';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ReactionForm=function ReactionForm(_ref){var postId=_ref.postId;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),reactionBody=_useState2[0],setBody=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),characterCount=_useState4[0],setCharacterCount=_useState4[1];var _useMutation=useMutation(ADD_REACTION),_useMutation2=_slicedToArray(_useMutation,2),addReaction=_useMutation2[0],error=_useMutation2[1].error;// update state based on form input changes\nvar handleChange=function handleChange(event){if(event.target.value.length<=280){setBody(event.target.value);setCharacterCount(event.target.value.length);}};// submit form\nvar handleFormSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return addReaction({variables:{reactionBody:reactionBody,postId:postId}});case 4:// clear form value\nsetBody('');setCharacterCount(0);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function handleFormSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"m-0 \".concat(characterCount===280||error?'text-error':''),children:[\"Character Count: \",characterCount,\"/280\",error&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:\"Something went wrong...\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"flex-row justify-center justify-space-between-md align-stretch\",onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Comment on this post...\",value:reactionBody,className:\"form-input col-12 col-md-9\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"btn col-12 col-md-3\",type:\"submit\",children:\"Submit\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{children:\"Something went wrong...\"})]});};export default ReactionForm;","map":{"version":3,"names":["React","useState","useMutation","ADD_REACTION","ReactionForm","postId","reactionBody","setBody","characterCount","setCharacterCount","addReaction","error","handleChange","event","target","value","length","handleFormSubmit","preventDefault","variables","console"],"sources":["D:/GitHub Repositories/Vinyl-Collectors-MERN/client/src/components/ReactionForm/index.js"],"sourcesContent":["import React, { useState } from 'react';\n\nimport { useMutation } from '@apollo/client';\nimport { ADD_REACTION } from '../../utils/mutations';\n\nconst ReactionForm = ({ postId }) => {\n    const [reactionBody, setBody] = useState('');\n    const [characterCount, setCharacterCount] = useState(0);\n    const [addReaction, { error }] = useMutation(ADD_REACTION);\n\n    // update state based on form input changes\n    const handleChange = (event) => {\n        if (event.target.value.length <= 280) {\n            setBody(event.target.value);\n            setCharacterCount(event.target.value.length);\n        }\n    };\n\n    // submit form\n    const handleFormSubmit = async (event) => {\n        event.preventDefault();\n\n        try {\n            await addReaction({\n                variables: { reactionBody, postId },\n            });\n\n            // clear form value\n            setBody('');\n            setCharacterCount(0);\n        } catch (e) {\n            console.error(e);\n        }\n    };\n\n    return (\n        <div>\n            <p\n                className={`m-0 ${characterCount === 280 || error ? 'text-error' : ''}`}\n            >\n                Character Count: {characterCount}/280\n                {error && <span className=\"ml-2\">Something went wrong...</span>}\n            </p>\n            <form\n                className=\"flex-row justify-center justify-space-between-md align-stretch\"\n                onSubmit={handleFormSubmit}\n            >\n                <textarea\n                    placeholder=\"Comment on this post...\"\n                    value={reactionBody}\n                    className=\"form-input col-12 col-md-9\"\n                    onChange={handleChange}\n                ></textarea>\n\n                <button className=\"btn col-12 col-md-3\" type=\"submit\">\n                    Submit\n                </button>\n            </form>\n\n            {error && <div>Something went wrong...</div>}\n        </div>\n    );\n};\n\nexport default ReactionForm;\n"],"mappings":"2aAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAEA,OAASC,WAAT,KAA4B,gBAA5B,CACA,OAASC,YAAT,KAA6B,uBAA7B,C,wFAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,MAAgB,IAAbC,OAAa,MAAbA,MAAa,CACjC,cAAgCJ,QAAQ,CAAC,EAAD,CAAxC,wCAAOK,YAAP,eAAqBC,OAArB,eACA,eAA4CN,QAAQ,CAAC,CAAD,CAApD,yCAAOO,cAAP,eAAuBC,iBAAvB,eACA,iBAAiCP,WAAW,CAACC,YAAD,CAA5C,8CAAOO,WAAP,kBAAsBC,KAAtB,kBAAsBA,KAAtB,CAEA;AACA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,KAAD,CAAW,CAC5B,GAAIA,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,MAAnB,EAA6B,GAAjC,CAAsC,CAClCT,OAAO,CAACM,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAP,CACAN,iBAAiB,CAACI,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,MAApB,CAAjB,CACH,CACJ,CALD,CAOA;AACA,GAAMC,iBAAgB,6FAAG,iBAAOJ,KAAP,oHACrBA,KAAK,CAACK,cAAN,GADqB,sCAIXR,YAAW,CAAC,CACdS,SAAS,CAAE,CAAEb,YAAY,CAAZA,YAAF,CAAgBD,MAAM,CAANA,MAAhB,CADG,CAAD,CAJA,QAQjB;AACAE,OAAO,CAAC,EAAD,CAAP,CACAE,iBAAiB,CAAC,CAAD,CAAjB,CAViB,+EAYjBW,OAAO,CAACT,KAAR,cAZiB,oEAAH,kBAAhBM,iBAAgB,6CAAtB,CAgBA,mBACI,oCACI,WACI,SAAS,eAAST,cAAc,GAAK,GAAnB,EAA0BG,KAA1B,CAAkC,YAAlC,CAAiD,EAA1D,CADb,+BAGsBH,cAHtB,QAIKG,KAAK,eAAI,aAAM,SAAS,CAAC,MAAhB,qCAJd,GADJ,cAOI,cACI,SAAS,CAAC,gEADd,CAEI,QAAQ,CAAEM,gBAFd,wBAII,iBACI,WAAW,CAAC,yBADhB,CAEI,KAAK,CAAEX,YAFX,CAGI,SAAS,CAAC,4BAHd,CAII,QAAQ,CAAEM,YAJd,EAJJ,cAWI,eAAQ,SAAS,CAAC,qBAAlB,CAAwC,IAAI,CAAC,QAA7C,oBAXJ,GAPJ,CAuBKD,KAAK,eAAI,gDAvBd,GADJ,CA2BH,CAzDD,CA2DA,cAAeP,aAAf"},"metadata":{},"sourceType":"module"}